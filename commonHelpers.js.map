{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs/refs.js","../src/js/partials/booklist.js","../src/js/partials/categories.js"],"sourcesContent":["// Імпортуємо refs в свій файл partials js\n// Приклад:\n// import { refs } from '../refs/refs';\n// console.log(refs.body);\n\nexport const refs = {\n  body: document.querySelector('body'),\n\n  //header\n\n  //categories\n  categoriesList: document.querySelector('.categories-list'),\n  //support\n\n  //book-list\n  booksPart: document.querySelector('.books-part'),\n  booksCaregoriesContainer: document.querySelector('.book-categories-container'),\n  //book-card-popup\n\n  //shopping list\n\n  //sign-in\n};\n","import { getTopBooks, getCategoryId } from \"../api/api\";\nimport { createBooksCaregoryTitle, createBooksInCategoryMarkup } from \"./categories\";\nimport { refs } from \"../refs/refs\";\n\ngetTopBooks()\n    .then(categories => {\n        refs.booksCaregoriesContainer.insertAdjacentHTML('beforeend', createBooksCategoriesCardsMarkup(categories));\n    }\n    )\n    .catch((err) => {\n        console.error(err);\n        // Notify.failure('Oops! Something went wrong! Try reloading the page!');\n    });\n\nrefs.booksCaregoriesContainer.addEventListener('click', onSeeMoreBtn);\n\nfunction onSeeMoreBtn(evt) {\n    if (evt.target.nodeName !== \"BUTTON\") {\n        return;\n    }\n\n    window.scrollTo(0, 0);\n\n    const btn = evt.target;\n    const categoryName = btn.parentElement.querySelector('.book-category-title').textContent;\n    \n    getCategoryId(categoryName)\n        .then(books => {\n            refs.booksPart.innerHTML = \n            `${createBooksCaregoryTitle(categoryName)}\n            <div class=\"book-category-wrapper\">\n                <ul class=\"book-cards-list book-cards-list-one-category\">\n                ${createBooksInCategoryMarkup(books)}                  \n                </ul>                             \n            </div>`            \n        })\n        .catch((err) => {\n            console.error(err);\n            // Notify.failure('Oops! Something went wrong! Try reloading the page!');\n        }); \n}\n\nfunction createBooksCategoriesCardsMarkup(categories) {\n    return categories.map(({ list_name, books }) => {              \n        return `<div class=\"book-category-container\">\n                <h2 class=\"book-category-title\">${list_name}</h2>\n                <ul class=\"book-cards-list\">\n                ${createBooksInCategoryMarkup(books)}                  \n                </ul>\n                <button type=\"button\" class=\"see-more-btn\">See more</button>             \n            </div>`\n    }).join('');\n};\n\nexport { createBooksCategoriesCardsMarkup };","import { getAllCategories, getTopBooks, getCategoryId } from \"../api/api\";\nimport { createBooksCategoriesCardsMarkup } from \"./booklist\"\nimport { refs } from \"../refs/refs\";\n\ngetAllCategories()\n    .then(categories => {\n        refs.categoriesList.innerHTML = createCategoriesListMarkup(categories);        \n    })\n    .catch((err) => {\n        console.error(err);\n        // Notify.failure('Oops! Something went wrong! Try reloading the page!');\n    });\n\nrefs.categoriesList.addEventListener('click', onLoadCategory);\n\nfunction onLoadCategory(evt) {\n    if (evt.target.nodeName !== \"LI\") {\n        return;\n    }\n\n    window.scrollTo(0, 0);\n\n    const curr = evt.target;\n    curr.parentElement.querySelector('.categories-list-item.active').classList.remove('active');\n    curr.classList.add('active');\n\n    const categoryName = evt.target.dataset.categoryName;\n        \n    if (categoryName === 'All categories') {\n        getTopBooks()\n            .then(categories => {\n                refs.booksPart.innerHTML = \n                `<h1 class=\"books-part-title\">Best Sellers\n                <span class=\"books-part-title-span\"> Books</span>\n                </h1>\n                <div class=\"book-categories-container\">\n                ${createBooksCategoriesCardsMarkup(categories)}\n                </div>`\n            }\n            )\n            .catch((err) => {\n                console.error(err);\n                // Notify.failure('Oops! Something went wrong! Try reloading the page!');\n            });\n        return\n    }    \n           \n    getCategoryId(categoryName)\n        .then(books => {\n            console.log(books);\n            refs.booksPart.innerHTML = \n            `${createBooksCaregoryTitle(categoryName)}\n            <div class=\"book-category-wrapper\">\n                <ul class=\"book-cards-list book-cards-list-one-category\">\n                ${createBooksInCategoryMarkup(books)}                  \n                </ul>                             \n            </div>`            \n        })\n        .catch((err) => {\n            console.error(err);\n            // Notify.failure('Oops! Something went wrong! Try reloading the page!');\n        });           \n};\n\nfunction createCategoriesListMarkup(categories) {\n    const result = categories.map(\n        ({ list_name }) =>\n            `<li class=\"categories-list-item\" data-category-name=\"${list_name}\">${list_name}</li>`\n    ).sort((a,b) => a.localeCompare(b));    \n    result.unshift(`<li class=\"categories-list-item active\" data-category-name=\"All categories\">All categories</li>`);\n    return result.join('');\n};\n\nfunction createBooksCaregoryTitle(categoryName) {\n    const categoryNameArr = categoryName.split(' ');\n    const categoryTitleSpan = categoryNameArr.pop();\n    const mainCategoryTitlePart = categoryNameArr.join(' ');\n    return `<h1 class=\"books-part-title\">${mainCategoryTitlePart} <span class=\"books-part-title-span\">${categoryTitleSpan}</span></h1>`\n};\n\nfunction createBooksInCategoryMarkup(books) {\n    return books.map(({ _id, book_image, author, title }) =>\n            `<li class=\"book-cards-list-item\">\n            <img\n            class=\"book-card-img\"\n            src=\"${book_image}\"\n            alt=\"${title}\"\n            data-book-id=\"${_id}\"\n            loading=\"lazy\"\n            />\n            <p class=\"book-card-title\">${title}</p>\n            <p class=\"book-card-author\">${author}</p>\n        </li>`\n        ).join('');\n};\n\nexport { createBooksCaregoryTitle, createBooksInCategoryMarkup };"],"names":["refs","getTopBooks","categories","createBooksCategoriesCardsMarkup","err","onSeeMoreBtn","evt","categoryName","getCategoryId","books","createBooksCaregoryTitle","createBooksInCategoryMarkup","list_name","getAllCategories","createCategoriesListMarkup","onLoadCategory","curr","result","a","b","categoryNameArr","categoryTitleSpan","_id","book_image","author","title"],"mappings":"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"}