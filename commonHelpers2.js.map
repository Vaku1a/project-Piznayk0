{"version":3,"file":"commonHelpers2.js","sources":["../src/js/partials/shopping-list.js"],"sourcesContent":["import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\n// Initialize fromLocalStr at the beginning\nconst fromLocalStr = JSON.parse(localStorage.getItem('bookList')) || [];\n\nconst itemsPerPage = 4; // Number of items to display per page\n\nconst options = {\n  totalItems: fromLocalStr.length,\n  itemsPerPage: itemsPerPage,\n  visiblePages: 4,\n  page: 1,\n};\n\nconst pagination = new Pagination('pagination', options);\n\nconst shoppingList = document.querySelector('.shopping-list');\n\nfunction renderBooks(startIndex, endIndex) {\n  const booksToRender = fromLocalStr.slice(startIndex, endIndex);\n\n  const bookCardsHTML = booksToRender\n    .map(\n      book => `\n      <li class=\"shopping-item\" id=\"${book._id}\">\n        <div class=\"shopping-card\">\n          <div class=\"shopping-image\">\n            <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"shopping-image\">\n          </div>\n          <div class=\"shopping-info\">\n            <h2 class=\"book-title\">${book.title}</h2>\n            <p class=\"book-category\">${book.publisher}</p>\n            <p class=\"book-desc\">${book.description}</p>\n            <p class=\"book-author\">${book.author}</p>\n          </div>\n          <button class=\"delete-book\">\n            <svg class=\"trash-delete\">\n              <use href=\"./img/icons.svg#icon-trash\"></use>\n            </svg>\n          </button>\n          <div class=\"extra-logo\">\n            <img class=\"amazon\" src=\"./img/shopping-list/amazon.svg\" alt=\"amazon\" />\n            <img class=\"apple\" src=\"./img/shopping-list/apple-books.svg\" alt=\"apple\" />\n          </div>\n        </div>\n      </li>\n\n    `\n    )\n    .join('');\n\n  shoppingList.innerHTML = bookCardsHTML;\n}\n\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n\n  renderBooks(startIndex, endIndex);\n});\n\n// Initial rendering\nrenderBooks(0, itemsPerPage);\n\nshoppingList.addEventListener('click', onClick);\n\nfunction onClick(event) {\n  if (\n    event.target.classList.contains('delete-book') ||\n    event.target.classList.contains('trash-delete')\n  ) {\n    const listItem = event.target.closest('.shopping-item');\n    if (listItem) {\n      const itemId = listItem.id;\n      shoppingList.removeChild(listItem);\n      removeFromLocalStorage(itemId);\n    }\n  }\n}\n\nfunction removeFromLocalStorage(id) {\n  const items = JSON.parse(localStorage.getItem('bookList')) || fromLocalStr;\n  const updatedItems = items.filter(item => item._id !== id);\n  localStorage.setItem('bookList', JSON.stringify(updatedItems));\n}\n\nif (fromLocalStr.length === 0) {\n  const emptyPageHTML = `\n  <div class=\"shopping-wrap-none\">\n      <div class=\"container-none-card\">\n        <h1 class=\"shopping-title-none\">\n          Shopping <span class=\"shopping-title-span-none\">List</span>\n        </h1>\n        <p class=\"shopping-text-none\">\n          This page is empty, add some books and proceed to order.\n        </p>\n        <img\n          class=\"image-big\"\n          src=\"../img/shopping-list/empty-bin@2x.png\"\n          alt=\"empty list\"\n        />\n        <img\n          class=\"image-small\"\n          src=\"../img/shopping-list/empty-bin@1x.png\"\n          alt=\"empty list\"\n        />\n      </div>\n    </div>\n  `;\n\n  shoppingList.innerHTML = emptyPageHTML;\n}\n"],"names":["fromLocalStr","itemsPerPage","options","pagination","Pagination","shoppingList","renderBooks","startIndex","endIndex","bookCardsHTML","book","event","onClick","listItem","itemId","removeFromLocalStorage","id","updatedItems","item","emptyPageHTML"],"mappings":"qFAIA,MAAMA,EAAe,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,GAE/DC,EAAe,EAEfC,EAAU,CACd,WAAYF,EAAa,OACzB,aAAcC,EACd,aAAc,EACd,KAAM,CACR,EAEME,EAAa,IAAIC,EAAW,aAAcF,CAAO,EAEjDG,EAAe,SAAS,cAAc,gBAAgB,EAE5D,SAASC,EAAYC,EAAYC,EAAU,CAGzC,MAAMC,EAFgBT,EAAa,MAAMO,EAAYC,CAAQ,EAG1D,IACCE,GAAQ;AAAA,sCACwBA,EAAK;AAAA;AAAA;AAAA,wBAGnBA,EAAK,oBAAoBA,EAAK;AAAA;AAAA;AAAA,qCAGjBA,EAAK;AAAA,uCACHA,EAAK;AAAA,mCACTA,EAAK;AAAA,qCACHA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAerC,EACA,KAAK,EAAE,EAEVL,EAAa,UAAYI,CAC3B,CAEAN,EAAW,GAAG,YAAaQ,GAAS,CAElC,MAAMJ,GADcI,EAAM,KACQ,GAAKV,EACjCO,EAAWD,EAAaN,EAE9BK,EAAYC,EAAYC,CAAQ,CAClC,CAAC,EAGDF,EAAY,EAAGL,CAAY,EAE3BI,EAAa,iBAAiB,QAASO,CAAO,EAE9C,SAASA,EAAQD,EAAO,CACtB,GACEA,EAAM,OAAO,UAAU,SAAS,aAAa,GAC7CA,EAAM,OAAO,UAAU,SAAS,cAAc,EAC9C,CACA,MAAME,EAAWF,EAAM,OAAO,QAAQ,gBAAgB,EACtD,GAAIE,EAAU,CACZ,MAAMC,EAASD,EAAS,GACxBR,EAAa,YAAYQ,CAAQ,EACjCE,EAAuBD,CAAM,CAC9B,CACF,CACH,CAEA,SAASC,EAAuBC,EAAI,CAElC,MAAMC,GADQ,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAKjB,GACnC,OAAOkB,GAAQA,EAAK,MAAQF,CAAE,EACzD,aAAa,QAAQ,WAAY,KAAK,UAAUC,CAAY,CAAC,CAC/D,CAEA,GAAIjB,EAAa,SAAW,EAAG,CAC7B,MAAMmB,EAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAuBtBd,EAAa,UAAYc,CAC3B"}