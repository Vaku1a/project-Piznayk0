{"version":3,"file":"commonHelpers2.js","sources":["../src/js/partials/shopping-list.js"],"sourcesContent":["\n\n\n\n// Отримуємо дані з локального сховища або створюємо порожній масив\nconst fromLocalStr = JSON.parse(localStorage.getItem('bookList')) || [];\n// Елемент, в якому будуть відображені книги\nconst shoppingList = document.querySelector('.shopping-list');\n\n\n// Функція для рендерингу книг для поточної сторінки\nexport function renderBooks(startIndex, endIndex) {\n  const booksToRender = fromLocalStr.slice(startIndex, endIndex);\n  // Генеруємо HTML для кожної книги\n  const bookCardsHTML = booksToRender\n    .map(\n      book => `\n      <li class=\"shopping-item\" id=\"${book._id}\">\n        <div class=\"shopping-card\">\n          <div class=\"shopping-image\">\n            <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"shopping-image\">\n          </div>\n          <div class=\"shopping-info\">\n            <h2 class=\"book-title\">${book.title}</h2>\n            <p class=\"book-category\">${book.publisher}</p>\n            <p class=\"book-desc\">${book.description}</p>\n            <p class=\"book-author\">${book.author}</p>\n          </div>\n          <button class=\"delete-book\">\n <svg class=\"trash-delete\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\">\n              <path d=\"M6.75 2.25H11.25M2.25 4.5H15.75M14.25 4.5L13.724 12.3895C13.6451 13.5732 13.6057 14.165 13.35 14.6138C13.1249 15.0088 12.7854 15.3265 12.3762 15.5248C11.9115 15.75 11.3183 15.75 10.132 15.75H7.86799C6.68168 15.75 6.08852 15.75 5.62375 15.5248C5.21457 15.3265 4.87507 15.0088 4.64999 14.6138C4.39433 14.165 4.35488 13.5732 4.27596 12.3895L3.75 4.5M7.5 7.875V11.625M10.5 7.875V11.625\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n          <div class=\"extra-logo\">\n            ${generateBuyLinks(book.buy_links)}\n          </div>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n  \n  // Змінюємо стилі для заголовка\n  const h1Element = document.querySelector('.shopping-title');\n  h1Element.style.paddingBottom = '40px';\n  // Вставляємо HTML з книгами в елемент\n  shoppingList.innerHTML = bookCardsHTML;\n}\n// Функція для генерації посилань на придбання книги\nfunction generateBuyLinks(buyLinks) {\n  const amazonLink = buyLinks.find(link => link.name === 'Amazon');\n  const appleBooksLink = buyLinks.find(link => link.name === 'Apple Books');\n\n  return `\n    <a href=\"${amazonLink.url}\" target=\"_blank\">\n      <img class=\"amazon\" src=\"./img/shopping-list/amazon.svg\" alt=\"amazon\" />\n    </a>\n    <a href=\"${appleBooksLink.url}\" target=\"_blank\">\n      <img class=\"apple\" src=\"./img/shopping-list/apple-books.svg\" alt=\"apple\" />\n    </a>\n  `;\n}\n// Рендеримо книги для першої сторінки\nrenderBooks(0, fromLocalStr.length);  \n\n\n\n\n\n// Додаємо обробник подій для видалення книг\nshoppingList.addEventListener('click', onClick);\n// Обробник події видалення книги\nfunction onClick(event) {\n  const deleteButton = event.target.closest('.delete-book');\n\n  if (deleteButton) {\n    const listItem = deleteButton.closest('.shopping-item');\n\n    if (listItem) {\n      const itemId = listItem.id;\n      shoppingList.removeChild(listItem);\n      removeFromLocalStorage(itemId);\n \n      \n    }\n  }\n}\n\n\n\n\n\n// Функція для видалення книги з локального сховища\nfunction removeFromLocalStorage(id) {\n  const items = JSON.parse(localStorage.getItem('bookList')) || fromLocalStr;\n  const updatedItems = items.filter(item => item._id !== id);\n  localStorage.setItem('bookList', JSON.stringify(updatedItems));\n  // Оновлюємо fromLocalStr до актуального стану\n  fromLocalStr.length = 0;\n  Array.prototype.push.apply(fromLocalStr, updatedItems);\n  // Перевіряємо кількість книг\n  if (fromLocalStr.length === 0) {\n    // Викликаємо функцію для відображення порожньої сторінки\n    showEmptyPage();\n    // Після видалення останньої книги оновлюємо сторінку після короткого затримки\n    setTimeout(() => {\n      location.reload();\n    }, 1000);\n  }\n}\n// Якщо немає книг, показуємо порожню сторінку\nif (fromLocalStr.length === 0) {\n  // Викликаємо функцію для відображення порожньої сторінки\n  showEmptyPage();\n  // Слухач події локального сховища для автоматичного оновлення сторінки\n  window.addEventListener('storage', (event) => {\n    if (event.key === 'bookList' && JSON.parse(event.newValue).length === 0) {\n      location.reload();\n    }\n  });\n}\n\n\n\n\nfunction showEmptyPage() {\n  // Якщо немає книг, показуємо порожню сторінку\n  // Генеруємо HTML для порожньої сторінки\n  const emptyPageHTML = `\n      <div class=\"container-none-card\">\n        <p class=\"shopping-text-none\">\n          This page is empty, add some books and proceed to order.\n        </p>\n        <img\n          class=\"image-big\"\n          src=\"../img/shopping-list/empty-bin@2x.png\"\n          alt=\"empty list\"\n        />\n        <img\n          class=\"image-small\"\n          src=\"../img/shopping-list/empty-bin@1x.png\"\n          alt=\"empty list\"\n        />\n      </div>\n  `;\n  // Змінюємо стилі для заголовка в залежності від ширини вікна\n  const h1Element = document.querySelector('.shopping-title');\n  function setH1Element() {\n    if (window.innerWidth >= 768) {\n      h1Element.style.paddingBottom = '140px';\n    } else {\n      h1Element.style.paddingBottom = '120px';\n    }\n  }\n  // Запускаємо функцію для встановлення стилів\n  setH1Element();\n  // Слухаємо подію зміни розміру вікна\n  window.addEventListener('resize', setH1Element);\n  // Вставляємо HTML для порожньої сторінки в елемент\n  shoppingList.innerHTML = emptyPageHTML;\n}\n\n\n//coment\n"],"names":["fromLocalStr","shoppingList","renderBooks","startIndex","endIndex","bookCardsHTML","book","generateBuyLinks","h1Element","buyLinks","amazonLink","link","appleBooksLink","onClick","event","deleteButton","listItem","itemId","removeFromLocalStorage","id","updatedItems","item","showEmptyPage","emptyPageHTML","setH1Element"],"mappings":"yEAKA,MAAMA,EAAe,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,GAE/DC,EAAe,SAAS,cAAc,gBAAgB,EAIrD,SAASC,EAAYC,EAAYC,EAAU,CAGhD,MAAMC,EAFgBL,EAAa,MAAMG,EAAYC,CAAQ,EAG1D,IACCE,GAAQ;AAAA,sCACwBA,EAAK;AAAA;AAAA;AAAA,wBAGnBA,EAAK,oBAAoBA,EAAK;AAAA;AAAA;AAAA,qCAGjBA,EAAK;AAAA,uCACHA,EAAK;AAAA,mCACTA,EAAK;AAAA,qCACHA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAQ5BC,EAAiBD,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,KAKxC,EACA,KAAK,EAAE,EAGJE,EAAY,SAAS,cAAc,iBAAiB,EAC1DA,EAAU,MAAM,cAAgB,OAEhCP,EAAa,UAAYI,CAC3B,CAEA,SAASE,EAAiBE,EAAU,CAClC,MAAMC,EAAaD,EAAS,KAAKE,GAAQA,EAAK,OAAS,QAAQ,EACzDC,EAAiBH,EAAS,KAAKE,GAAQA,EAAK,OAAS,aAAa,EAExE,MAAO;AAAA,eACMD,EAAW;AAAA;AAAA;AAAA,eAGXE,EAAe;AAAA;AAAA;AAAA,GAI9B,CAEAV,EAAY,EAAGF,EAAa,MAAM,EAOlCC,EAAa,iBAAiB,QAASY,CAAO,EAE9C,SAASA,EAAQC,EAAO,CACtB,MAAMC,EAAeD,EAAM,OAAO,QAAQ,cAAc,EAExD,GAAIC,EAAc,CAChB,MAAMC,EAAWD,EAAa,QAAQ,gBAAgB,EAEtD,GAAIC,EAAU,CACZ,MAAMC,EAASD,EAAS,GACxBf,EAAa,YAAYe,CAAQ,EACjCE,EAAuBD,CAAM,CAG9B,CACF,CACH,CAOA,SAASC,EAAuBC,EAAI,CAElC,MAAMC,GADQ,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAKpB,GACnC,OAAOqB,GAAQA,EAAK,MAAQF,CAAE,EACzD,aAAa,QAAQ,WAAY,KAAK,UAAUC,CAAY,CAAC,EAE7DpB,EAAa,OAAS,EACtB,MAAM,UAAU,KAAK,MAAMA,EAAcoB,CAAY,EAEjDpB,EAAa,SAAW,IAE1BsB,IAEA,WAAW,IAAM,CACf,SAAS,OAAM,CAChB,EAAE,GAAI,EAEX,CAEItB,EAAa,SAAW,IAE1BsB,IAEA,OAAO,iBAAiB,UAAYR,GAAU,CACxCA,EAAM,MAAQ,YAAc,KAAK,MAAMA,EAAM,QAAQ,EAAE,SAAW,GACpE,SAAS,OAAM,CAErB,CAAG,GAMH,SAASQ,GAAgB,CAGvB,MAAMC,EAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAkBhBf,EAAY,SAAS,cAAc,iBAAiB,EAC1D,SAASgB,GAAe,CAClB,OAAO,YAAc,IACvBhB,EAAU,MAAM,cAAgB,QAEhCA,EAAU,MAAM,cAAgB,OAEnC,CAEDgB,IAEA,OAAO,iBAAiB,SAAUA,CAAY,EAE9CvB,EAAa,UAAYsB,CAC3B"}