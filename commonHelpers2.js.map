{"version":3,"file":"commonHelpers2.js","sources":["../src/js/partials/shopping-list.js"],"sourcesContent":["// Імпортуємо компонент Pagination та стилі для нього\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\n// Отримуємо дані з локального сховища або створюємо порожній масив\nconst fromLocalStr = JSON.parse(localStorage.getItem('bookList')) || [];\n\n// Кількість елементів на сторінці\nconst itemsPerPage = 3;\n\n// Перевіряємо чи потрібно відображати пагінацію\nconst showPagination = fromLocalStr.length > itemsPerPage;\n\n// Опції для пагінації\nconst options = {\n  totalItems: fromLocalStr.length,\n  itemsPerPage: itemsPerPage,\n  visiblePages: 4,\n  page: 1,\n};\n\n// Якщо пагінація потрібна, створюємо об'єкт Pagination\nif (showPagination) {\n  const pagination = new Pagination('pagination', options);\n\n  // Додаємо обробник події після переміщення по сторінках пагінації\n  pagination.on('afterMove', event => {\n    const currentPage = event.page;\n    console.log(event)\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n\n    // Рендеримо книги для поточної сторінки\n    renderBooks(startIndex, endIndex);\n  });\n}\n\n// Створюємо об'єкт Pagination для випадку, коли пагінація не потрібна (щоб не було помилок)\nconst pagination = new Pagination('pagination', options);\n\n// Елемент, в якому будуть відображені книги\nconst shoppingList = document.querySelector('.shopping-list');\n\n// Функція для рендерингу книг для поточної сторінки\nfunction renderBooks(startIndex, endIndex) {\n  const booksToRender = fromLocalStr.slice(startIndex, endIndex);\n\n  // Генеруємо HTML для кожної книги\n  const bookCardsHTML = booksToRender\n    .map(\n      book => `\n      <li class=\"shopping-item\" id=\"${book._id}\">\n        <div class=\"shopping-card\">\n          <div class=\"shopping-image\">\n            <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"shopping-image\">\n          </div>\n          <div class=\"shopping-info\">\n            <h2 class=\"book-title\">${book.title}</h2>\n            <p class=\"book-category\">${book.publisher}</p>\n            <p class=\"book-desc\">${book.description}</p>\n            <p class=\"book-author\">${book.author}</p>\n          </div>\n          <button class=\"delete-book\">\n            <svg class=\"trash-delete\">\n              <use href=\"./img/icons.svg#icon-trash\"></use>\n            </svg>\n          </button>\n          <div class=\"extra-logo\">\n ${generateBuyLinks(book.buy_links)}\n          </div>\n        </div>\n      </li>\n\n    `\n    )\n     .join('');\n\n  // Змінюємо стилі для заголовка\n  const h1Element = document.querySelector('.shopping-title');\n  h1Element.style.paddingBottom = '40px';\n\n  // Вставляємо HTML з книгами в елемент\n  shoppingList.innerHTML = bookCardsHTML;\n}\n\n// Функція для генерації посилань на придбання книги\nfunction generateBuyLinks(buyLinks) {\n  const amazonLink = buyLinks.find(link => link.name === 'Amazon');\n  const appleBooksLink = buyLinks.find(link => link.name === 'Apple Books');\n\n  return `\n    <a href=\"${amazonLink.url}\" target=\"_blank\">\n      <img class=\"amazon\" src=\"./img/shopping-list/amazon.svg\" alt=\"amazon\" />\n    </a>\n    <a href=\"${appleBooksLink.url}\" target=\"_blank\">\n      <img class=\"apple\" src=\"./img/shopping-list/apple-books.svg\" alt=\"apple\" />\n    </a>\n  `;\n}\n\n// Додаємо обробник події після переміщення по сторінках пагінації (дублюємо код)\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n\n  // Рендеримо книги для поточної сторінки\n  renderBooks(startIndex, endIndex);\n});\n\n// Рендеримо книги для першої сторінки\nrenderBooks(0, itemsPerPage);\n\n// Додаємо обробник подій для видалення книг\nshoppingList.addEventListener('click', onClick);\n\n\n// Обробник події видалення книги\nfunction onClick(event) {\n  if (\n    event.target.classList.contains('delete-book') ||\n    event.target.classList.contains('trash-delete')\n  ) {\n    const listItem = event.target.closest('.shopping-item');\n    if (listItem) {\n      const itemId = listItem.id;\n      shoppingList.removeChild(listItem);\n      removeFromLocalStorage(itemId);\n    }\n  }\n}\n\n// Функція для видалення книги з локального сховища\nfunction removeFromLocalStorage(id) {\n  const items = JSON.parse(localStorage.getItem('bookList')) || fromLocalStr;\n  const updatedItems = items.filter(item => item._id !== id);\n  localStorage.setItem('bookList', JSON.stringify(updatedItems));\n}\n\n// Перевіряємо, чи немає книг або чи не потрібна пагінація\nif (fromLocalStr.length === 0 || !showPagination) {\n  // Ховаємо елемент пагінації\n  const paginationElement = document.querySelector('#pagination');\n  paginationElement.style.display = 'none';\n}\n\n// Якщо немає книг, показуємо повідомлення про порожню сторінку\nif (fromLocalStr.length === 0) {\n  // Ховаємо елемент пагінації\n  const paginationElement = document.querySelector('#pagination');\n  paginationElement.style.display = 'none';\n\n  // Генеруємо HTML для порожньої сторінки\n  const emptyPageHTML = `\n      <div class=\"container-none-card\">\n        <p class=\"shopping-text-none\">\n          This page is empty, add some books and proceed to order.\n        </p>\n        <img\n          class=\"image-big\"\n          src=\"../img/shopping-list/empty-bin@2x.png\"\n          alt=\"empty list\"\n        />\n        <img\n          class=\"image-small\"\n          src=\"../img/shopping-list/empty-bin@1x.png\"\n          alt=\"empty list\"\n        />\n      </div>\n  `;\n\n  // Змінюємо стилі для заголовка в залежності від ширини вікна\n  const h1Element = document.querySelector('.shopping-title');\n  function setH1Element() {\n    if (window.innerWidth >= 768) {\n      h1Element.style.paddingBottom = '140px';\n    } else {\n      h1Element.style.paddingBottom = '120px';\n    }\n  }\n\n  // Запускаємо функцію для встановлення стилів\n  setH1Element();\n  // Слухаємо подію зміни розміру вікна\n  window.addEventListener('resize', setH1Element);\n  \n  // Вставляємо HTML для порожньої сторінки в елемент\n  shoppingList.innerHTML = emptyPageHTML;\n}"],"names":["fromLocalStr","itemsPerPage","showPagination","options","Pagination","event","currentPage","startIndex","endIndex","renderBooks","pagination","shoppingList","bookCardsHTML","book","generateBuyLinks","h1Element","buyLinks","amazonLink","link","appleBooksLink","onClick","listItem","itemId","removeFromLocalStorage","id","updatedItems","item","paginationElement","setH1Element","emptyPageHTML"],"mappings":"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"}